name: Momo-Store-Application

env:
  VERSION: 1.0.${{ github.sha }}

on:
  push:
    paths:
      - 'momo-store-application/**'
      - '.github/workflows/momo-store-application.yml'

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Clone repository
        uses: actions/checkout@v4

      - name: Build Momo Store Docker Images
        run:
          - cd momo-store-application/backend
          - echo ${{ env.VERSION }}
          - >
            docker build
            --build-arg VERSION=${{ env.VERSION }}
            --tag $CI_REGISTRY_IMAGE/momo-store-backend:$CI_COMMIT_SHA
            .
            ls -la